<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta name="google-signin-scope" content="profile email">
    <meta name="google-signin-client_id" content="416868084578-5lpgni9ohjh9gp48br1h2vi2dhqg0klv.apps.googleusercontent.com">
    <script src="https://apis.google.com/js/platform.js"></script>

    <!-- UIkit CSS -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/uikit@3.5.4/dist/css/uikit.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0-2/css/all.min.css">
    <link rel="stylesheet" href="vendor/css/style.css">
    <title></title>
  </head>
  <body>
    <section id="login-page">
        <div class="bg-video">
            <video class="bg-video-content" autoplay muted loop>
                <source src="vendor/img/video.mp4" type="video/mp4">
                <!-- <source src="img/video.webm" type="video/webm"> -->
                    your browser is not supported
            </video>
        </div>
        <div class="center">
            <h1 style="margin-bottom: 3rem;" class="welcome">Welcome To My Mukhbang</h1>
            <form onsubmit="login(event)">
                <div class="uk-margin">
                    <div class="uk-inline">
                        <span class="uk-form-icon" uk-icon="icon: user"></span>
                        <input id="login-email" class="uk-input" type="email" placeholder="email here">
                    </div>
                </div>

                <div class="uk-margin">
                    <div class="uk-inline">
                        <span class="uk-form-icon uk-form-icon-flip" uk-icon="icon: lock"></span>
                        <input id="login-password" class="uk-input" type="password" placeholder="password here">
                    </div>
                </div>

                <button type="submit" class="login-btn uk-button uk-button-primary">Login</button>

                <div class="uk-margin">
                  <div class="uk-inline">
                    <span class="uk-form-icon uk-form-icon-flip" uk-icon="icon: lock"></span>
                    Didn't have account? <a href="register.html">Register</a>
                  </div>
                </div>


                <div class="uk-margin">
                  <div class="uk-inline">
                    <span class="uk-form-icon uk-form-icon-flip" uk-icon="icon: lock"></span>
                    Or
                    <div class="g-signin2" data-onsuccess="onSignIn"></div>
                    <script>
                    function onSignIn(googleUser) {
                      // Useful data for your client-side scripts:
                      let profile = googleUser.getBasicProfile();
                      console.log("ID: " + profile.getId()); // Don't send this directly to your server!
                      console.log('Full Name: ' + profile.getName());
                      console.log('Given Name: ' + profile.getGivenName());
                      console.log('Family Name: ' + profile.getFamilyName());
                      console.log("Image URL: " + profile.getImageUrl());
                      console.log("Email: " + profile.getEmail());

                      // The ID token you need to pass to your backend:
                      let id_token = googleUser.getAuthResponse().id_token;
                      console.log("ID Token: " + id_token);
                      $.ajax({
                      method: 'POST',
                      url: `${BASE_URL}/tokensignin`,    //ini url backend kita, nanti gw bikin endpoint tokensignin
                      data: { id_token: id_token }
                      })
                      .done((response)=>{
                        localStorage.setItem('token',response.token)
                        window.location.href = "dashboard.html";
                      })
                      .fail((jqXHR, textStatus)=>{

                      })
                    </script>
                  </div>
                </div>
            </form>
        </div>
    </section>
    <script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/uikit@3.5.4/dist/js/uikit.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/uikit@3.5.4/dist/js/uikit-icons.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@9"></script>
    <script src="main.js"></script>
  </body>
</html>
